<project default="dist">

<target name="dist">
	  
	  <delete includeemptydirs="true">
			       <fileset dir="build"  />
	   </delete>
	
	<mkdir dir="build"/>
	<mkdir dir="build/dist"/>
	<mkdir dir="build/classes"/>
	
	  <javac srcdir="src"
	         destdir="build/classes"
	  	      
	         debug="on"
	         source="1.5" target="1.5" >
	    
	  	<classpath>
	  	  			  	 	<fileset dir="..\trace.agent.bootstrap\build\dist\">
	  	  			  	 	</fileset>

	  	  			  	 </classpath>
	  	</javac>
	
	<jar destfile="build/dist/agent.jar" >
	    
	    <manifest>
	      <!-- Who is building this jar? -->
	      <attribute name="Built-By" value="Thomas Krieger"/>
	      <!-- Information about the program itself -->
	      <attribute name="Implementation-Vendor" value="Anarsoft"/>
	      <attribute name="Implementation-Title" value="JVMLense Agent"/>
	      <attribute name="Implementation-Version" value="${version}"/>
	      <attribute name="Can-Redefine-Classes" value="true"/>
	      <attribute name="Premain-Class" value="com.anarsoft.trace.agent.Agent"/>
	      <attribute name="Agent-Class" value="com.anarsoft.trace.agent.Agent"/>
	      <attribute name="Boot-Class-Path" value="agent_bootstrap.jar"/>
	      <!-- details -->
	     
	    	
	    	
	    </manifest>
	  		  	
	  	<fileset dir="build/classes"  />
	  	
	  </jar>

</target>


</project>